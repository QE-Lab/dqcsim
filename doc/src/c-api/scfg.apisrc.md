# Configuring a simulation

Once you've constructed the plugin configuration objects for your simulation,
you can start putting them together in a simulation configuration object
(`scfg`).

## Constructing a simulation configuration

A basic simulation with a frontend and a backend can be constructed as follows.

```C
dqcs_handle_t frontend_pcfg = ...;
dqcs_handle_t backend_pcfg = ...;
dqcs_handle_t scfg = dqcs_scfg_new();
dqcs_scfg_push_plugin(scfg, frontend_pcfg);
dqcs_scfg_push_plugin(scfg, backend_pcfg);
```

The order in which you push plugins doesn't matter, except for operators, which
must be pushed in downstream order.

@@@c_api_gen ^dqcs_scfg_new$@@@
@@@c_api_gen ^dqcs_scfg_push_plugin$@@@

## Random seed

The random seed can be set and queried using the functions below. The default
seed is generated using a hash of the most accurate system timestamp available.

@@@c_api_gen ^dqcs_scfg_seed_set$@@@
@@@c_api_gen ^dqcs_scfg_seed_get$@@@

## Reproduction

DQCsim can output a reproduction file for the simulation when the simulation is
complete. The recording logic for this system is on by default, since it is
recommended to always output such a file. After all, you never know when
something unexpected that you might want to reproduce might happen!

By default, the generated reproduction file will specify the plugin executable
and script paths as they were generated or specified. However, depending on how
you intend to reproduce the simulation later, you may want purely relative or
purely absolute paths instead. This can be configured using the following
functions.

@@@c_api_gen ^dqcs_scfg_repro_path_style_set$@@@
@@@c_api_gen ^dqcs_scfg_repro_path_style_get$@@@

It is also possible to disable the reproduction system. The only benefit this
has is to supress the warning message that's generated when a simulation cannot
be reproduced, which is the case when plugin threads are used.

@@@c_api_gen ^dqcs_scfg_repro_disable$@@@

## Logging configuration

DQCsim has two main log message verbosity filters. The first is configured
using `dqcs_scfg_dqcsim_verbosity_*()`. It controls the filtering of messages
generated by the simulation management code, as opposed to the messages
received from the various plugins. Like the plugin-specific filters, this
defaults to passing all messages through.

@@@c_api_gen ^dqcs_scfg_dqcsim_verbosity_set$@@@
@@@c_api_gen ^dqcs_scfg_dqcsim_verbosity_get$@@@

The second filter controls the minimum verbosity that a message must have for
it to be written to stderr. This filter defaults to info.

@@@c_api_gen ^dqcs_scfg_stderr_verbosity_set$@@@
@@@c_api_gen ^dqcs_scfg_stderr_verbosity_get$@@@

It's also possible to have DQCsim pipe all the log messages it receives to a
file, optionally with its own verbosity filter. This is configured using
`dqcs_scfg_tee()`.

@@@c_api_gen ^dqcs_scfg_tee$@@@

Finally, you can have DQCsim call a callback function whenever it receives a
log message. This can be used to tie DQCsim's logging system into whatever
different logging system that the host process uses.

@@@c_api_gen ^dqcs_scfg_log_callback$@@@
